# Домашнее задание к занятию "Репликация и масштабирование. Часть 2" - Карпов Антон Юрьевич

## Задание 1

Опишите основные преимущества использования масштабирования методами:

* активный master-сервер и пассивный репликационный slave-сервер;
* master-сервер и несколько slave-серверов;
Дайте ответ в свободной форме.

## Решение 1

#### Активный master‑сервер и пассивный репликационный slave‑сервер

* Устойчивость к сбоям. При выходе из строя master‑сервера пассивный slave можно оперативно перевести в активный режим. Это минимизирует время простоя системы и обеспечивает непрерывность работы.

* Резервное копирование. Slave‑сервер служит актуальной резервной копией данных. В случае аварии это позволяет быстро восстановить информацию без потери критически важных данных.

* Упрощение обслуживания. На пассивном сервере можно выполнять резервное копирование, аналитические запросы или тестирование обновлений без нагрузки на основной сервер.

* Готовность к масштабированию. Схема создаёт базу для дальнейшего расширения — при росте нагрузки можно добавить дополнительные slave‑серверы.

#### Master‑сервер и несколько slave‑серверов

* Горизонтальная масштабируемость. Добавление новых slave‑серверов позволяет распределять нагрузку чтения между ними. Это особенно важно при росте числа пользователей и запросов.

* Балансировка нагрузки. Запросы на чтение равномерно распределяются между slave‑серверами.

* Повышенная отказоустойчивость. При выходе из строя одного из slave‑серверов система продолжает работать за счёт оставшихся серверов. Это снижает риски простоев.

* Можно обновлять конфигурации master‑сервера без остановки работы slave‑серверов, создавать новые slave‑серверы на основе текущих данных без прерывания сервиса, проводить тестирование обновлений на отдельных slave‑серверах.

* Разгрузка основного сервера. Перенос операций чтения на slave‑серверы освобождает ресурсы master‑сервера для критически важных операций записи, что повышает эффективность системы в целом.

* Географическое распределение. Slave‑серверы можно размещать в разных регионах, что сокращает задержки для пользователей и улучшает локальный доступ к данным.


## Задание 2

Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц:

* пользователи,
* книги,
* магазины (столбцы произвольно).
Опишите принципы построения системы и их разграничение или разбивку между базами данных.

Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.

## Решение 2

#### Вертикальный шардинг
Храним на каждом сервере свою таблицу. Т.е. условно, сервер server_user отвечает за авторизацию, server_books - за каталог, server_stores - за продажи. 

![alt text](image.png)

Каждый сервер работает по схеме master-slave в асинхронном режиме.

#### Горизонтальный шардинг 
Имеем 3 сервера для хранения и один основной (postgres_b), в этом случае данные по трем таблицам разбиваем на 3 ноды. 

![alt text](image-1.png)

Каждый сервер работает по схеме master-slave в асинхронном режиме.












